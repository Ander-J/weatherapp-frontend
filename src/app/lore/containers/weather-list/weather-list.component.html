<div class="data-table" (updated)="newWeatherUpdate()">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
        <ng-container matColumnDef="id">
            <th class="w-75" mat-header-cell *matHeaderCellDef> No. </th>
            <td (click)="weatherDetails(element.id)" (mouseover)="weatherHover(element.id)"
                (mouseout)="weatherVisible(false)" mat-cell *matCellDef="let element">{{element.id}}</td>
        </ng-container>

        <ng-container matColumnDef="location">
            <th mat-header-cell *matHeaderCellDef> Location </th>
            <td (click)="weatherDetails(element.id)" (mouseover)="weatherHover(element.id)"
                (mouseout)="weatherVisible(false)" mat-cell *matCellDef="let element">{{element.location}}</td>
        </ng-container>

        <ng-container matColumnDef="degrees">
            <th mat-header-cell *matHeaderCellDef> Temperature </th>
            <td (click)="weatherDetails(element.id)" (mouseover)="weatherHover(element.id)"
                (mouseout)="weatherVisible(false)" mat-cell *matCellDef="let element">{{element.temp}} CÂ°</td>
        </ng-container>

        <ng-container matColumnDef="weather">
            <th mat-header-cell *matHeaderCellDef> Current weather </th>
            <td (click)="weatherDetails(element.id)" (mouseover)="weatherHover(element.id)"
                (mouseout)="weatherVisible(false)" mat-cell *matCellDef="let element">{{element.weather}}</td>
        </ng-container>

        <ng-container matColumnDef="buttons">
            <th class="w-75" mat-header-cell *matHeaderCellDef>
                <button mat-raised-button color="primary" class="refresh-btn" (click)="updateAllData()">
                    <mat-icon>refresh</mat-icon>
                </button>
            </th>

            <td mat-cell *matCellDef="let element">
                <button mat-raised-button color="accent" class="delete-btn" (click)="deleteWeather(element.id)">
                    <mat-icon>delete</mat-icon>
                </button>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
    <mat-expansion-panel hideToggle>
        <mat-expansion-panel-header>
            <mat-panel-title>
                Add location
            </mat-panel-title>
            <mat-panel-description>
                Click to add a new location
            </mat-panel-description>
        </mat-expansion-panel-header>
        <div class="expansion-row">
            <mat-form-field appearance="legacy">
                <mat-label>Enter location</mat-label>
                <input matInput (keyup.enter)="newWeather()">
            </mat-form-field>
            <button mat-button class="add-btn" (click)="newWeather()">Add</button>
        </div>
    </mat-expansion-panel>
</div>

<div id="weather-view" [hidden]="isViewVisible">
    <app-weather-view></app-weather-view>
</div>